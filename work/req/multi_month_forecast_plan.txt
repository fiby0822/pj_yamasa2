複数月連続予測対応方針（2025年1〜3月一括予測に向けて）
================================================================

現状整理
- `train_model_product_level.py` は `forecast_month_start` から当月末まで（1ヶ月）のみを対象として予測・可視化を生成する設計。
- 予測結果や可視化も単月想定で保存され、複数月を跨ぐホライズンを一度に扱う機能がない。
- 予測対象期間を増やすにはスクリプトを月ごとに繰り返し実行する必要があり、ベースライン比較や連続的な誤差分析が煩雑。

対応方針
1. 予測期間指定の拡張
   - CLI に `--forecast-end-month`（YYYY-MM）を追加し、`forecast_month_start` から `forecast_end_month` までの日次カレンダーを生成。
   - 内部的には `forecast_start_dt = YYYY-MM-01`, `forecast_end_dt = forecast_end_month` の月末とし、`pd.date_range` で全日付を作成。

2. 逐次予測ループの更新
   - `sequential_forecast` に `forecast_end_dt` を渡し、最終日までの全日付を一度のループで予測する。
   - FeatureState の更新ロジックは既存のまま利用し、multi-monthでも累積的に状態を維持。

3. 保存フォーマットの拡張
   - 予測パーケット/CSV に `forecast_start`, `forecast_end` をメタ情報として付与。
   - サマリ・可視化出力先ディレクトリ名を `vis_{forecast_start}_{forecast_end}` の形式に変更し、複数月予測でも一目で範囲が分かるようにする。

4. 可視化の調整
   - `PredictionVisualizer` は `horizon_months` を自動算出 (期間月数) し、3か月の予測を連続プロット。
   - 表示期間はデフォルトで予測開始の3か月前から最終予測日まで。

5. 指標計算の確認
   - sMAPE / WAPE を全ホライズンで計算するよう維持。
   - 月別指標の出力が必要な場合に備え、オプションで `groupby('month')` のサマリ生成を追加検討。

6. 実行検証
   - 2024/12 まで学習、2025/01〜03 一括予測での動作確認。
   - 予測パーケットの日付範囲が 2025-01-01〜2025-03-31 となること、ゼロ実績が含まれることを確認。
   - 可視化/サマリが `vis_2025-01_2025-03` 等に出力され、3か月連続シリーズが描画されることを確認。
